module.exports = {

"[externals]/ [external] (next/dist/compiled/next-server/app-route.runtime.dev.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: require } = __turbopack_context__;
{
const mod = __turbopack_external_require__("next/dist/compiled/next-server/app-route.runtime.dev.js");

module.exports = mod;
}}),
"[externals]/ [external] (@opentelemetry/api, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: require } = __turbopack_context__;
{
const mod = __turbopack_external_require__("@opentelemetry/api");

module.exports = mod;
}}),
"[externals]/ [external] (next/dist/compiled/next-server/app-page.runtime.dev.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: require } = __turbopack_context__;
{
const mod = __turbopack_external_require__("next/dist/compiled/next-server/app-page.runtime.dev.js");

module.exports = mod;
}}),
"[externals]/ [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: require } = __turbopack_context__;
{
const mod = __turbopack_external_require__("next/dist/server/app-render/work-unit-async-storage.external.js");

module.exports = mod;
}}),
"[externals]/ [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: require } = __turbopack_context__;
{
const mod = __turbopack_external_require__("next/dist/server/app-render/work-async-storage.external.js");

module.exports = mod;
}}),
"[externals]/ [external] (@prisma/client, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: require } = __turbopack_context__;
{
const mod = __turbopack_external_require__("@prisma/client");

module.exports = mod;
}}),
"[project]/src/app/api/condition/route.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: require } = __turbopack_context__;
{
__turbopack_esm__({
    "POST": (()=>POST)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$__$5b$external$5d$__$2840$prisma$2f$client$2c$__cjs$29$__ = __turbopack_import__("[externals]/ [external] (@prisma/client, cjs)");
;
const prisma = new __TURBOPACK__imported__module__$5b$externals$5d2f$__$5b$external$5d$__$2840$prisma$2f$client$2c$__cjs$29$__["PrismaClient"]();
async function POST(req) {
    try {
        const body = await req.json();
        const { bridgeCondition = "", deckCond = "", superstructureCond = "", substructureCond = "", channelCond = "", culvertCond = "", structuralEval = "", deckGeometryEval = "", underclearanceEval = "", waterwayEval = "", apprRoadEval = {
            min: 0,
            max: 0
        }, postingEval = {
            min: 0,
            max: 0
        }, lowestRating = {
            min: 0,
            max: 0
        } } = body;
        // Initialize filters for Condition table
        const filters = {};
        // Add string conditions to filters
        if (bridgeCondition) filters.bridgeCondition = bridgeCondition;
        if (deckCond) filters.deckCond = deckCond;
        if (superstructureCond) filters.superstructureCond = superstructureCond;
        if (substructureCond) filters.substructureCond = substructureCond;
        if (channelCond) filters.channelCond = channelCond;
        if (culvertCond) filters.culvertCond = culvertCond;
        if (structuralEval) filters.structuralEval = structuralEval;
        if (deckGeometryEval) filters.deckGeometryEval = deckGeometryEval;
        if (underclearanceEval) filters.underclearanceEval = underclearanceEval;
        if (waterwayEval) filters.waterwayEval = waterwayEval;
        // Add range filters
        if (apprRoadEval.min || apprRoadEval.max) {
            filters.apprRoadEval = {
                gte: apprRoadEval.min || undefined,
                lte: apprRoadEval.max || undefined
            };
        }
        if (postingEval.min || postingEval.max) {
            filters.postingEval = {
                gte: postingEval.min || undefined,
                lte: postingEval.max || undefined
            };
        }
        console.log(apprRoadEval);
        console.log(postingEval);
        if (lowestRating.min || lowestRating.max) {
            filters.lowestRating = {
                gte: lowestRating.min || undefined,
                lte: lowestRating.max || undefined
            };
        }
        // Fetch filtered results with inner join on Bridge table
        const conditions = await prisma.condition.findMany({
            where: filters,
            include: {
                Bridge: {
                    select: {
                        structureNumber: true,
                        lat: true,
                        long: true,
                        location: true,
                        yearBuilt: true
                    }
                }
            }
        });
        // Map results to include lat/long in top-level response
        const results = conditions.map((condition)=>({
                id: condition.id,
                structureNumber: condition.structureNumber,
                bridgeCondition: condition.bridgeCondition,
                deckCond: condition.deckCond,
                superstructureCond: condition.superstructureCond,
                substructureCond: condition.substructureCond,
                channelCond: condition.channelCond,
                culvertCond: condition.culvertCond,
                structuralEval: condition.structuralEval,
                deckGeometryEval: condition.deckGeometryEval,
                underclearanceEval: condition.underclearanceEval,
                waterwayEval: condition.waterwayEval,
                apprRoadEval: condition.apprRoadEval,
                postingEval: condition.postingEval,
                lowestRating: condition.lowestRating,
                lat: condition.Bridge.lat,
                long: condition.Bridge.long,
                location: condition.Bridge.location,
                yearBuilt: condition.Bridge.yearBuilt
            }));
        return new Response(JSON.stringify(results), {
            status: 200,
            headers: {
                "Content-Type": "application/json"
            }
        });
    } catch (error) {
        console.error("Error fetching conditions:", error);
        return new Response(JSON.stringify({
            message: "Failed to fetch conditions",
            error: error instanceof Error ? error.message : "Unknown error"
        }), {
            status: 500,
            headers: {
                "Content-Type": "application/json"
            }
        });
    }
}
}}),
"[project]/ (server-utils)": ((__turbopack_context__) => {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, t: require } = __turbopack_context__;
{
}}),

};

//# sourceMappingURL=%5Broot%20of%20the%20server%5D__06fbbe._.js.map