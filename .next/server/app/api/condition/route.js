(()=>{var e={};e.id=481,e.ids=[481],e.modules={6330:e=>{"use strict";e.exports=require("@prisma/client")},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},1427:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>m,routeModule:()=>d,serverHooks:()=>p,workAsyncStorage:()=>c,workUnitAsyncStorage:()=>l});var n={};r.r(n),r.d(n,{POST:()=>u});var o=r(2706),a=r(8203),i=r(5994);let s=new(r(6330)).PrismaClient;async function u(e){try{let{bridgeCondition:t="",deckCond:r="",superstructureCond:n="",substructureCond:o="",channelCond:a="",culvertCond:i="",structuralEval:u="",deckGeometryEval:d="",underclearanceEval:c="",waterwayEval:l="",apprRoadEval:p={min:0,max:0},postingEval:m={min:0,max:0},lowestRating:v={min:0,max:0}}=await e.json(),g={};t&&(g.bridgeCondition=t),r&&(g.deckCond=r),n&&(g.superstructureCond=n),o&&(g.substructureCond=o),a&&(g.channelCond=a),i&&(g.culvertCond=i),u&&(g.structuralEval=u),d&&(g.deckGeometryEval=d),c&&(g.underclearanceEval=c),l&&(g.waterwayEval=l),(p.min||p.max)&&(g.apprRoadEval={gte:p.min||void 0,lte:p.max||void 0}),(m.min||m.max)&&(g.postingEval={gte:m.min||void 0,lte:m.max||void 0}),console.log(p),console.log(m),(v.min||v.max)&&(g.lowestRating={gte:v.min||void 0,lte:v.max||void 0});let x=(await s.condition.findMany({where:g,include:{Bridge:{select:{structureNumber:!0,lat:!0,long:!0,location:!0,yearBuilt:!0}}}})).map(e=>({id:e.id,structureNumber:e.structureNumber,bridgeCondition:e.bridgeCondition,deckCond:e.deckCond,superstructureCond:e.superstructureCond,substructureCond:e.substructureCond,channelCond:e.channelCond,culvertCond:e.culvertCond,structuralEval:e.structuralEval,deckGeometryEval:e.deckGeometryEval,underclearanceEval:e.underclearanceEval,waterwayEval:e.waterwayEval,apprRoadEval:e.apprRoadEval,postingEval:e.postingEval,lowestRating:e.lowestRating,lat:e.Bridge.lat,long:e.Bridge.long,location:e.Bridge.location,yearBuilt:e.Bridge.yearBuilt}));return new Response(JSON.stringify(x),{status:200,headers:{"Content-Type":"application/json"}})}catch(e){return console.error("Error fetching conditions:",e),new Response(JSON.stringify({message:"Failed to fetch conditions",error:e instanceof Error?e.message:"Unknown error"}),{status:500,headers:{"Content-Type":"application/json"}})}}let d=new o.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/condition/route",pathname:"/api/condition",filename:"route",bundlePath:"app/api/condition/route"},resolvedPagePath:"/Users/ahmadhawamdah/Documents/map9/src/app/api/condition/route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:c,workUnitAsyncStorage:l,serverHooks:p}=d;function m(){return(0,i.patchFetch)({workAsyncStorage:c,workUnitAsyncStorage:l})}},6487:()=>{},8335:()=>{},2706:(e,t,r)=>{"use strict";e.exports=r(4870)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[994],()=>r(1427));module.exports=n})();