(()=>{var e={};e.id=137,e.ids=[137],e.modules={6330:e=>{"use strict";e.exports=require("@prisma/client")},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},9445:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>g,routeModule:()=>l,serverHooks:()=>m,workAsyncStorage:()=>c,workUnitAsyncStorage:()=>p});var i={};t.r(i),t.d(i,{POST:()=>d});var s=t(2706),n=t(8203),a=t(5994),o=t(2708),u=t(9187);async function d(e){try{let{location:r=[],yearBuilt:t={min:1967,max:2024},yearReconstructed:i={min:0,max:2024},fedAgency:s="",serviceOn:n=0,routePrefix:a=0,bounds:d=null}=await e.json(),l={};if(d&&Array.isArray(d)&&4===d.length){let[e,r,t,i]=d;r=Math.round(1e6*r),i=Math.round(1e6*i),e=Math.round(1e6*e),t=Math.round(1e6*t),l.lat={gte:r,lte:i},l.long={gte:e,lte:t}}if(r&&r.length>0){let e=r.split(" ").filter(e=>""!==e.trim());l.OR=e.map(e=>({location:{contains:e,mode:"insensitive"}}))}(t.min||t.max)&&(l.yearBuilt={gte:t.min||void 0,lte:t.max||void 0}),(i.min||i.max)&&(l.yearReconstructed={gte:i.min||void 0,lte:i.max||void 0}),s&&(l.fedAgency=s),n&&(l.serviceOn=n),a&&(l.routePrefix=a);let c=await o.A.bridge.findMany({where:l,select:{structureNumber:!0,location:!0,yearBuilt:!0,yearReconstructed:!0,fedAgency:!0,serviceOn:!0,routePrefix:!0,long:!0,lat:!0}});return u.NextResponse.json(c,{status:200})}catch(e){return console.error("Error fetching bridges:",e),u.NextResponse.json({message:"Failed to fetch bridges",error:e instanceof Error?e.message:"Unknown error"},{status:500})}finally{await o.A.$disconnect()}}let l=new s.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/bridge/route",pathname:"/api/bridge",filename:"route",bundlePath:"app/api/bridge/route"},resolvedPagePath:"/Users/ahmadhawamdah/Documents/map9/src/app/api/bridge/route.ts",nextConfigOutput:"",userland:i}),{workAsyncStorage:c,workUnitAsyncStorage:p,serverHooks:m}=l;function g(){return(0,a.patchFetch)({workAsyncStorage:c,workUnitAsyncStorage:p})}},6487:()=>{},8335:()=>{},2708:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});var i=t(6330);let s=globalThis.prismaGlobal??new i.PrismaClient}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[989,452],()=>t(9445));module.exports=i})();